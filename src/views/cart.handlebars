<h2>Carrito {{cart._id}}</h2>

{{#if cart.products.length}}
<table border="1" cellpadding="6" cellspacing="0">
  <thead>
    <tr>
      <th>Producto</th>
      <th>Precio</th>
      <th>Cantidad</th>
      <th>Total</th>
      <th>Acción</th>
    </tr>
  </thead>
  <tbody>
  {{#each cart.products}}
    <tr>
      <td>{{this.product.title}}</td>
      <td>${{this.product.price}}</td>
      <td>{{this.quantity}}</td>
      <td>${{mul this.product.price this.quantity}}</td>
      <td>
        <form method="post" action="/api/carts/{{../cart._id}}/products/{{this.product._id}}?_method=PUT" onsubmit="return false;">
          <input type="number" value="{{this.quantity}}" min="1" class="qtyInput" data-cid="{{../cart._id}}" data-pid="{{this.product._id}}">
          <button class="btnUpdate">Actualizar</button>
        </form>
        <button class="btnDelete" data-cid="{{../cart._id}}" data-pid="{{this.product._id}}">Eliminar</button>
      </td>
    </tr>
  {{/each}}
  </tbody>
</table>

<button id="btnVaciar" data-cid="{{cart._id}}">Vaciar carrito</button>
{{else}}
<p>Carrito vacío</p>
{{/if}}

<script src="/js/shop.js"></script>